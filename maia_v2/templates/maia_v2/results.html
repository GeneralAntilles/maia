{% extends 'maia_v2/base.html' %}
{% load i18n %}
{% load static %}
{% block head_title %}{% trans "Home" %}{% endblock %}

{% block js %}
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/billboard.js@3.7.5/dist/billboard.js"></script>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/billboard.js@3.7.5/dist/billboard.css" />
{% endblock %}

{% block content %}
<div class="container-lg">
    <h1>{{ questionnaire.name }}</h1>
    <h2>Results</h2>
    <p>Your score was <strong>{{ total_score }}</strong> out of <strong>{{ questionnaire.scale_max }}</strong>, which is in the <strong>{{ score_percentile }} percentile</strong> of all respondents to this test.</p>
    <div class="chart-container"><div id="result-hist-chart"></div></div>
    <div class="chart-container"><div id="result-bar-chart"></div></div>
    <script>
        var total_score = {{ total_score }};
        var max_score = {{ questionnaire.scale_max }};
        var bucket = {{ bucket }};
    </script>
    <script src="{% static 'maia_v2_chart.js' %}"></script>
</div>
{% endblock %}
